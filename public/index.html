<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Home - Recur</title>
  
  <link rel="icon" type="image/png" href="/icons/favicon-96x96.png" sizes="96x96" />
  <link rel="icon" type="image/svg+xml" href="/icons/favicon.svg" />
  <link rel="shortcut icon" href="/favicon.ico" />
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png" />
  <link rel="manifest" href="/site.webmanifest" />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"
    rel="stylesheet">

  <link rel="stylesheet" href="/css/variables.css">
  <link rel="stylesheet" href="/css/reset.css">
  <link rel="stylesheet" href="/css/base.css">
  <link rel="stylesheet" href="/css/layouts.css">
  <link rel="stylesheet" href="/css/buttons.css">
  <link rel="stylesheet" href="/css/tables.css">
  <link rel="stylesheet" href="/css/forms.css">
  <link rel="stylesheet" href="/css/dialogs.css">
  <link rel="stylesheet" href="/css/training.css">
</head>

<body>
  <main class="container">
    <header class="app-header">
      <img src="/icons/logo.svg" alt="Recur" width="32" height="32">

      <div class="user-menu">
        <span id="user-name" class="user-name"></span>
        <div id="language-switcher" class="language-switcher">
          <select id="language-dropdown" class="form-control">
            <option id="add-language-option" value="add-new">+ Add language</option>
          </select>
        </div>
        <button type="button" id="logout-btn" class="button -secondary">Sign out</button>
      </div>
    </header>
    
      <header class="table-header">
        <div class="left">
          <h1 class="title">Your vocabulary <span class="count" data-target="word-count"></span></h1>
        </div>

        <button type="button" id="add-vocabulary-btn" class="button -secondary">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 5V19M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round"
              stroke-linejoin="round" />
          </svg>
          Add
        </button>
        <button type="button" id="start-training-btn" disabled class="button -primary">Loading...</button>
      </header>
      
      <table class="table-content" id="vocabulary-table">
        <thead>
          <tr>
            <th data-sort="front" class="sortable">Word</th>
            <th data-sort="box" class="sortable">Box</th>
            <th data-sort="next_review" class="sortable">Next Review</th>
            <th width="100"></th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>

      <div id="pagination" class="table-pagination">
        <div class="info">
          <span>Page</span>
          <span id="pagination-range"></span>
          <span>of</span>
          <span id="pagination-total"></span>
        </div>

        <label for="pagination-limit" class="label">
          Per page:
        </label>

        <select id="pagination-limit" class="form-control">
          <option value="10">10</option>
          <option value="25">25</option>
          <option value="50" selected>50</option>
          <option value="100">100</option>
        </select>
        
        <button type="button" id="pagination-prev" class="button -secondary" disabled>Previous</button>
        <button type="button" id="pagination-next" class="button -secondary" disabled>Next</button>
      </div>
  </main>

  <dialog id="vocabulary-dialog">
    <form id="vocabulary-form" method="dialog">
      <h2 id="dialog-title">Add Vocabulary</h2>
      <input type="hidden" name="id">

      <div class="form-group">
        <label for="front" class="form-label">Front</label>
        <input type="text" name="front" id="front" class="form-control" placeholder="e.g. hello" required>
      </div>

      <div class="form-group">
        <label for="back" class="form-label">Back</label>
        <input type="text" name="back" id="back" class="form-control" placeholder="e.g. hola" required>
      </div>

      <div class="dialog-actions">
        <button type="button" id="dialog-cancel-btn" class="button -secondary">Cancel</button>
        <button type="button" id="dialog-save-add-btn" class="button -secondary">Save and Add</button>
        <button type="submit" id="dialog-submit-btn" class="button -primary">Save</button>
      </div>
    </form>
  </dialog>

  <dialog id="training-dialog">
    <div id="training-content">
      <h2>Training</h2>
      <p id="training-progress"></p>
      <div id="training-card">
        <p id="training-front" class="card-front"></p>
        <form id="training-form">
          <div class="form-group">
            <input type="text" id="training-answer" class="form-control" placeholder="Type your answer..." autocomplete="off"
              required>
          </div>
          <button type="submit" class="button -primary">Check</button>
        </form>
        <div id="training-result" hidden>
          <p id="training-feedback"></p>
          <p>Correct answer: <strong id="training-correct-answer"></strong></p>
          <button type="button" id="training-next-btn" class="button -primary">Next</button>
        </div>
      </div>
    </div>
    <div id="training-complete" hidden>
      <h2>Training Complete!</h2>
      <p id="training-summary"></p>
      <button type="button" id="training-close-btn" class="button -primary">Close</button>
    </div>
    <div id="training-empty" hidden>
      <h2>No Words to Review</h2>
      <p>There are no vocabulary words scheduled for review today.</p>
      <button type="button" id="training-empty-close-btn" class="button -secondary">Close</button>
    </div>
  </dialog>

  <dialog id="language-dialog">
    <form id="language-form" method="dialog">
      <h2>Add Language</h2>
      
      <div class="form-group">
        <label for="language-select" class="form-label">Select a language</label>
        <select id="language-select" class="form-control" required></select>
      </div>

      <div class="dialog-actions">
        <button type="button" id="language-dialog-cancel" class="button -secondary">Cancel</button>
        <button type="submit" class="button -primary">Add</button>
      </div>
    </form>
  </dialog>

  <script type="module" src="/js/main.js"></script>
</body>

</html>