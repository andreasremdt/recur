<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Home - Recur</title>
    
    <link rel="icon" type="image/png" href="/icons/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="/icons/favicon.svg" />
    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png" />
    <link rel="manifest" href="/site.webmanifest" />

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"
      rel="stylesheet">

    <link rel="stylesheet" href="/css/variables.css">
    <link rel="stylesheet" href="/css/reset.css">
    <link rel="stylesheet" href="/css/base.css">
    <link rel="stylesheet" href="/css/layouts.css">
    <link rel="stylesheet" href="/css/buttons.css">
    <link rel="stylesheet" href="/css/icons.css">
    <link rel="stylesheet" href="/css/tables.css">
    <link rel="stylesheet" href="/css/forms.css">
    <link rel="stylesheet" href="/css/training.css">
  </head>

  <body>
    <main class="container">
      <header class="app-header">
        <img src="/icons/logo.svg" alt="Recur" width="32" height="32">

        <div class="user-menu">
          <span id="user-name" class="user-name"></span>
          <div id="language-switcher" class="language-switcher">
            <select id="language-dropdown" class="form-control">
              <option id="add-language-option" value="add-new">+ Add language</option>
            </select>
          </div>
          <button type="button" id="logout-btn" class="button -secondary">Sign out</button>
        </div>
      </header>
      
        <header class="table-header">
          <div class="left">
            <h1 class="title">Your vocabulary <span class="count" data-target="word-count"></span></h1>
          </div>

          <button type="button" data-action="add" class="button -secondary">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M12 5V19M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                stroke-linejoin="round" />
            </svg>
            Add
          </button>
          <button type="button" data-action="start-training" disabled class="button -primary">Loading...</button>
        </header>
        
        <table class="table-content" id="vocabulary-table">
          <thead>
            <tr>
              <th data-sort="front" class="sortable">Word</th>
              <th data-sort="box" class="sortable">Box</th>
              <th data-sort="next_review" class="sortable">Next Review</th>
              <th width="100"></th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>

        <div id="pagination" class="table-pagination">
          <div class="info">
            <span>Page</span>
            <span id="pagination-range"></span>
            <span>of</span>
            <span id="pagination-total"></span>
          </div>

          <label for="pagination-limit" class="label">
            Per page:
          </label>

          <select id="pagination-limit" class="form-control">
            <option value="10">10</option>
            <option value="25">25</option>
            <option value="50" selected>50</option>
            <option value="100">100</option>
          </select>
          
          <button type="button" id="pagination-prev" class="button -secondary" disabled>Previous</button>
          <button type="button" id="pagination-next" class="button -secondary" disabled>Next</button>
        </div>
    </main>

    <dialog data-target="vocabulary-dialog">
      <header>
        <h2 data-target="title">Add vocabulary</h2>

        <button aria-label="Close dialog" type="submit" form="vocabulary-form" formnovalidate value="cancel">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M17 7L7 17M7 7L17 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
        </button>
      </header>

      <form data-target="vocabulary-form" method="dialog" id="vocabulary-form">
        <input type="hidden" name="id">

        <div class="form-group">
          <label for="front" class="form-label">In your language</label>
          <input type="text" id="front" class="form-control" placeholder="e.g. hello" required>
        </div>

        <div class="form-group">
          <label for="back" class="form-label">In the target language</label>
          <input type="text" id="back" class="form-control" placeholder="e.g. hola" required>
        </div>

        <footer>
          <button type="submit" formnovalidate value="cancel" class="button -secondary" data-testid="cancel-button">Cancel</button>
          <button type="submit" value="save-and-add" data-action="save-and-add" class="button -secondary">Save and add</button>
          <button type="submit" value="save" class="button -primary" data-testid="save-button">Save</button>
        </footer>
      </form>
    </dialog>

    <dialog data-target="training-dialog">
      <header>
        <h2>Training</h2>

        <button aria-label="Close dialog" type="submit" form="training-form" formnovalidate value="cancel">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M17 7L7 17M7 7L17 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
        </button>
      </header>
      
      <div class="progress-indicator" data-target="progress-indicator">
        <progress value="0" min="0" max="0" id="progress"></progress>
        <label for="progress"></label>
      </div>

      <form class="training-form" data-target="training-form" id="training-form" method="dialog">
        <div class="form-group">
          <label for="answer" data-target="label"></label>
          <input type="text" id="answer" class="form-control" placeholder="Type your answer..." autocomplete="off" required autofocus>
        </div>

        <button type="submit" class="button -primary" data-testid="check-button">Check</button>
      </form>

      <div class="training-result" data-target="training-result" hidden>
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon" data-target="icon">
          <path d="M20 6L9 17L4 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" hidden />
          <path d="M17 7L7 17M7 7L17 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" hidden />
        </svg>
      
        <p data-target="feedback"></p>
        <p>Correct answer: <b data-target="correct-answer"></b></p>
        <button type="button" data-target="next" class="button -primary">Next</button>
      </div>

      <div class="training-complete" data-target="training-complete" hidden>
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon -neutral">
          <path d="M8 14C8 14 9.5 16 12 16C14.5 16 16 14 16 14M17 9.24C16.605 9.725 16.065 10 15.5 10C14.935 10 14.41 9.725 14 9.24M10 9.24C9.605 9.725 9.065 10 8.5 10C7.935 10 7.41 9.725 7 9.24M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      
        <p>Training completed!</p>
        <p data-target="summary"></p>
        <button type="button" data-target="close" class="button -primary">Close</button>
      </div>
    </dialog>

    <dialog id="language-dialog">
      <header>
        <h2>Add language</h2>
      </header>
    
      <form id="language-form" method="dialog">
        <div class="form-group">
          <label for="language-select" class="form-label">Select a language</label>
          <select id="language-select" class="form-control" required></select>
        </div>

        <footer>
          <button type="button" id="language-dialog-cancel" class="button -secondary">Cancel</button>
          <button type="submit" class="button -primary">Add</button>
        </footer>
      </form>
    </dialog>

    <script type="module" src="/js/main.js"></script>
  </body>
</html>